---
title: "Gapminder Exploration"
author: "Kenny Chiu"
date: "2019-09-24"
output: github_document
---


## Introduction

we explore the `gapminder` dataset available in the `gapminder` R package. This exploration also uses the `tidyverse` R package.

```{r, echo=FALSE}
library(gapminder)
suppressPackageStartupMessages(library(tidyverse))
knitr::opts_chunk$set(fig.align = "center")
```


## Exercise 1: Basic `dplyr`

### 1.1

We filter the `gapminder` data to include only data from Canada, the United States, and Taiwan in the 1970's.

```{r 1.1}
(df = filter(gapminder, country == "Canada" | country == "United States" | country == "Taiwan",
                  year >= 1970 & year <= 1979))
```

### 1.2

We extract the `country` and `gdpPercap` variables from the filtered dataset.

```{r 1.2}
df %>%
  select(country, gdpPercap)
```

### 1.3

We filter the `gapminder` dataset to all entries that have experienced a drop in life expectancy.

```{r 1.3}
df = gapminder
df %>%
  group_by(continent, country) %>%
  mutate(lifeExp_inc = lifeExp - lag(lifeExp, order_by = year)) %>%
  filter(lifeExp_inc < 0)
```


### 1.4

We filter the `gapminder` dataset so that it shows the max GDP per capita experienced by each country.

```{r 1.4}
df = gapminder
df %>%
  group_by(country) %>%
  filter(gdpPercap == max(gdpPercap))
```


### 1.5 TODO

We produce a scatterplot of Canada's life expectancy vs log GDP per capita.

```{r 1.5}
filter(gapminder, country == "Canada") %>%
  ggplot(aes(gdpPercap, lifeExp)) +
  geom_point() +
  scale_x_log10("GDP per capita", labels = scales::dollar_format())
```

